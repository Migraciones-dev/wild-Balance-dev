{% comment %}
  Seccion: Sorteo info (fondo verde)
  - Bloques para texto, imagen full, CTA y tira de imagenes
  - CTA con mismo estilo que la seccion anterior
{% endcomment %}

{%- liquid
  assign align_class = 'text-center items-center'
  assign topline_desktop_left = section.settings.topline_text_desktop_left | default: 'Descubre todo sobre nuestro sorteo'
  assign topline_desktop_right = section.settings.topline_text_desktop_right | default: '→'
  assign topline_mobile = section.settings.topline_text_mobile | default: topline_desktop_left | append: ' ' | append: topline_desktop_right
-%}

<section
  id="mig-sorteo-info-{{ section.id }}"
  class="w-full"
  style="
    background-color: {{ section.settings.bg_color }};
    padding-top: {{ section.settings.pt_mobile }}px;
    padding-bottom: {{ section.settings.pb_mobile }}px;
  "
>
  <style>
    #mig-sorteo-info-{{ section.id }} {
      position: relative;
      border-radius: {{ section.settings.radius_top_mobile }}px {{ section.settings.radius_top_mobile }}px {{ section.settings.radius_bottom_mobile }}px {{ section.settings.radius_bottom_mobile }}px;
      overflow: hidden;
    }
    #mig-sorteo-info-{{ section.id }} .mig-rich p {
      margin: 0;
    }
    #mig-sorteo-info-{{ section.id }} .mig-rich p + p {
      margin-top: 8px;
    }
    #mig-sorteo-info-{{ section.id }} .mig-rich a {
      text-decoration: underline;
    }
    #mig-sorteo-info-{{ section.id }} .mig-font-bobby {
      font-family: "F37 Bobby", sans-serif;
      font-weight: 400;
    }
    #mig-sorteo-info-{{ section.id }} .mig-font-ginger {
      font-family: "F37 Ginger", sans-serif;
      font-weight: 400;
    }
    #mig-sorteo-info-{{ section.id }} .mig-font-ginger-bold {
      font-family: "F37 Ginger", sans-serif;
      font-weight: 700;
    }
    #mig-sorteo-info-{{ section.id }} .mig-cta {
      font-size: clamp(16px, 2.3vw, 54px);
      font-weight: 700;
      line-height: 1.05;
      padding: 0.7em 1.2em;
      white-space: nowrap;
      width: min(92vw, 620px);
      text-align: center;
    }
    #mig-sorteo-info-{{ section.id }} .mig-topline {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      padding-top: 12px;
      font-size: 14px;
      letter-spacing: 0.08em;
      z-index: 1;
    }
    #mig-sorteo-info-{{ section.id }} .mig-block {
      margin-top: var(--mt-mobile);
      margin-bottom: var(--mb-mobile);
    }
    #mig-sorteo-info-{{ section.id }} .mig-image {
      width: var(--w-mobile);
      max-width: 100%;
    }
    #mig-sorteo-info-{{ section.id }} .mig-full-bleed {
      position: relative;
      left: 50%;
      right: 50%;
      width: 100vw;
      margin-left: -50vw;
      margin-right: -50vw;
    }
    @media (min-width: 1024px) {
      #mig-sorteo-info-{{ section.id }} {
        padding-top: {{ section.settings.pt_desktop }}px;
        padding-bottom: {{ section.settings.pb_desktop }}px;
        border-radius: {{ section.settings.radius_top_desktop }}px {{ section.settings.radius_top_desktop }}px {{ section.settings.radius_bottom_desktop }}px {{ section.settings.radius_bottom_desktop }}px;
      }
      #mig-sorteo-info-{{ section.id }} .mig-cta {
        font-weight: 800;
        width: auto;
        padding: 0.55em 1.2em;
      }
      #mig-sorteo-info-{{ section.id }} .mig-topline {
        padding-top: 16px;
      }
      #mig-sorteo-info-{{ section.id }} .mig-block {
        margin-top: var(--mt-desktop);
        margin-bottom: var(--mb-desktop);
      }
      #mig-sorteo-info-{{ section.id }} .mig-image {
        width: var(--w-desktop);
      }
    }
  </style>

  {% if topline_mobile != blank or topline_desktop_left != blank or topline_desktop_right != blank %}
    <div class="mig-topline" style="color: {{ section.settings.topline_color }};">
      <div class="w-full px-6 lg:px-10">
        <div class="lg:hidden text-center">{{ topline_mobile }}</div>
        <div class="hidden lg:flex w-full items-center justify-between max-w-[95%] mx-auto">
          <span>{{ topline_desktop_left }}</span>
          <span>{{ topline_desktop_right }}</span>
        </div>
      </div>
    </div>
  {% endif %}

  <div class="max-w-[1600px] mx-auto px-6 lg:px-10">
    <div class="flex flex-col gap-8 lg:gap-10">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'text_group' %}
            <div
              class="mig-block flex flex-col {{ align_class }} gap-3"
              style="
                --mt-mobile: {{ block.settings.mt_mobile }}px;
                --mb-mobile: {{ block.settings.mb_mobile }}px;
                --mt-desktop: {{ block.settings.mt_desktop }}px;
                --mb-desktop: {{ block.settings.mb_desktop }}px;
              "
              {{ block.shopify_attributes }}
            >
              {% if block.settings.eyebrow != blank %}
                <p
                  class="text-[12px] sm:text-[13px] uppercase tracking-[0.2em]"
                  style="color: {{ block.settings.eyebrow_color }}"
                >
                  {{ block.settings.eyebrow }}
                </p>
              {% endif %}
              {% if block.settings.heading != blank %}
                <h2
                  class="mig-font-bobby text-[26px] sm:text-[32px] lg:text-[40px] leading-tight"
                  style="color: {{ block.settings.heading_color }}"
                >
                  {{ block.settings.heading }}
                </h2>
              {% endif %}
              {% if block.settings.text != blank %}
                <div
                  class="mig-rich mig-font-bobby text-[15px] sm:text-[16px] lg:text-[18px] leading-relaxed"
                  style="color: {{ block.settings.text_color }}"
                >
                  {{ block.settings.text }}
                </div>
              {% endif %}
            </div>

          {% when 'rich_text' %}
            {%- assign size_class = 'text-[14px] sm:text-[15px] lg:text-[16px]' -%}
            {%- assign font_class = 'mig-font-bobby' -%}
            {%- if block.settings.text_size == 'base' -%}
              {%- assign size_class = 'text-[15px] sm:text-[16px] lg:text-[18px]' -%}
            {%- elsif block.settings.text_size == 'lg' -%}
              {%- assign size_class = 'text-[18px] sm:text-[20px] lg:text-[22px]' -%}
            {%- endif -%}
            {%- if block.settings.font_family == 'ginger' -%}
              {%- assign font_class = 'mig-font-ginger' -%}
            {%- elsif block.settings.font_family == 'ginger_bold' -%}
              {%- assign font_class = 'mig-font-ginger-bold' -%}
            {%- endif -%}
            <div
              class="mig-block"
              style="
                --mt-mobile: {{ block.settings.mt_mobile }}px;
                --mb-mobile: {{ block.settings.mb_mobile }}px;
                --mt-desktop: {{ block.settings.mt_desktop }}px;
                --mb-desktop: {{ block.settings.mb_desktop }}px;
              "
              {{ block.shopify_attributes }}
            >
              <div
                class="mig-rich {{ font_class }} {{ size_class }} leading-relaxed text-center"
                style="color: {{ block.settings.text_color }}"
              >
                {{ block.settings.content }}
              </div>
            </div>

          {% when 'image' %}
            <div
              class="mig-block mig-full-bleed w-full flex justify-center"
              style="
                --mt-mobile: {{ block.settings.mt_mobile }}px;
                --mb-mobile: {{ block.settings.mb_mobile }}px;
                --mt-desktop: {{ block.settings.mt_desktop }}px;
                --mb-desktop: {{ block.settings.mb_desktop }}px;
                --w-mobile: {{ block.settings.mobile_width }}%;
                --w-desktop: {{ block.settings.desktop_width }}%;
              "
              {{ block.shopify_attributes }}
            >
              {% if block.settings.image_mobile != blank %}
                <img
                  src="{{ block.settings.image_mobile | image_url: width: 1600 }}"
                  alt="{{ block.settings.image_alt | escape }}"
                  class="mig-image block lg:hidden h-auto object-cover"
                  loading="lazy"
                >
              {% endif %}
              {% if block.settings.image_desktop != blank %}
                <img
                  src="{{ block.settings.image_desktop | image_url: width: 2400 }}"
                  alt="{{ block.settings.image_alt | escape }}"
                  class="mig-image {% if block.settings.image_mobile != blank %}hidden lg:block{% else %}block{% endif %} h-auto object-cover"
                  loading="lazy"
                >
              {% elsif block.settings.image_mobile != blank %}
                <img
                  src="{{ block.settings.image_mobile | image_url: width: 2400 }}"
                  alt="{{ block.settings.image_alt | escape }}"
                  class="mig-image hidden lg:block h-auto object-cover"
                  loading="lazy"
                >
              {% endif %}
            </div>

          {% when 'cta' %}
            {% if block.settings.button_label != blank and block.settings.button_link != blank %}
              <div
                class="mig-block flex justify-center"
                style="
                  --mt-mobile: {{ block.settings.mt_mobile }}px;
                  --mb-mobile: {{ block.settings.mb_mobile }}px;
                  --mt-desktop: {{ block.settings.mt_desktop }}px;
                  --mb-desktop: {{ block.settings.mb_desktop }}px;
                "
                {{ block.shopify_attributes }}
              >
                <a
                  href="{{ block.settings.button_link }}"
                  class="mig-cta inline-flex items-center justify-center rounded-full uppercase tracking-wide shadow-md"
                  style="background-color: {{ block.settings.button_bg }}; color: {{ block.settings.button_color }};"
                >
                  {{ block.settings.button_label }}
                </a>
              </div>
            {% endif %}
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Sorteo info (verde)",
  "tag": "section",
  "class": "t4s-section t4s-section-all",
  "settings": [
    { "type": "header", "content": "Fondo y espaciado" },
    { "type": "color", "id": "bg_color", "label": "Color de fondo", "default": "#0B4D2A" },
    { "type": "header", "content": "Topline" },
    {
      "type": "text",
      "id": "topline_text_desktop_left",
      "label": "Texto topline desktop (izquierda)",
      "default": "Descubre todo sobre nuestro sorteo"
    },
    {
      "type": "text",
      "id": "topline_text_desktop_right",
      "label": "Texto topline desktop (derecha)",
      "default": "→"
    },
    {
      "type": "text",
      "id": "topline_text_mobile",
      "label": "Texto topline movil",
      "default": "Descubre todo sobre nuestro sorteo →"
    },
    { "type": "color", "id": "topline_color", "label": "Color topline", "default": "#F7F2E6" },

    { "type": "range", "id": "pt_desktop", "label": "Padding superior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 40 },
    { "type": "range", "id": "pb_desktop", "label": "Padding inferior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 40 },
    { "type": "range", "id": "pt_mobile", "label": "Padding superior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 28 },
    { "type": "range", "id": "pb_mobile", "label": "Padding inferior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 28 },

    { "type": "header", "content": "Border radius" },
    { "type": "range", "id": "radius_top_desktop", "label": "Radio superior desktop", "min": 0, "max": 80, "step": 2, "unit": "px", "default": 16 },
    { "type": "range", "id": "radius_bottom_desktop", "label": "Radio inferior desktop", "min": 0, "max": 80, "step": 2, "unit": "px", "default": 16 },
    { "type": "range", "id": "radius_top_mobile", "label": "Radio superior movil", "min": 0, "max": 80, "step": 2, "unit": "px", "default": 12 },
    { "type": "range", "id": "radius_bottom_mobile", "label": "Radio inferior movil", "min": 0, "max": 80, "step": 2, "unit": "px", "default": 12 }
  ],
  "blocks": [
    {
      "type": "text_group",
      "name": "Titulo + texto",
      "settings": [
        { "type": "text", "id": "eyebrow", "label": "Eyebrow", "default": "Descubre todo sobre nuestro sorteo" },
        { "type": "color", "id": "eyebrow_color", "label": "Color eyebrow", "default": "#F7F2E6" },
        { "type": "text", "id": "heading", "label": "Titulo", "default": "Tu peludo vera el mundo que tu le ensenes" },
        { "type": "color", "id": "heading_color", "label": "Color titulo", "default": "#F7F2E6" },
        { "type": "richtext", "id": "text", "label": "Texto", "default": "<p>y Wild Balance os prepara una escapada increible</p>" },
        { "type": "color", "id": "text_color", "label": "Color texto", "default": "#F7F2E6" },
        { "type": "header", "content": "Margenes" },
        { "type": "range", "id": "mt_desktop", "label": "Margen superior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mb_desktop", "label": "Margen inferior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mt_mobile", "label": "Margen superior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mb_mobile", "label": "Margen inferior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 }
      ]
    },
    {
      "type": "cta",
      "name": "CTA",
      "settings": [
        { "type": "text", "id": "button_label", "label": "Texto boton", "default": "Haz tu pedido" },
        { "type": "url", "id": "button_link", "label": "Link boton" },
        { "type": "color", "id": "button_bg", "label": "Fondo boton", "default": "#F5C400" },
        { "type": "color", "id": "button_color", "label": "Color texto boton", "default": "#0B4D2A" },
        { "type": "header", "content": "Margenes" },
        { "type": "range", "id": "mt_desktop", "label": "Margen superior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mb_desktop", "label": "Margen inferior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mt_mobile", "label": "Margen superior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mb_mobile", "label": "Margen inferior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 }
      ]
    },
    {
      "type": "image",
      "name": "Imagen",
      "settings": [
        { "type": "image_picker", "id": "image_desktop", "label": "Imagen desktop" },
        { "type": "image_picker", "id": "image_mobile", "label": "Imagen movil" },
        { "type": "text", "id": "image_alt", "label": "Alt imagen", "default": "Imagen" },

        { "type": "header", "content": "Ancho maximo (%)" },
        { "type": "range", "id": "desktop_width", "label": "Ancho maximo desktop", "min": 20, "max": 100, "step": 2, "unit": "%", "default": 100 },
        { "type": "range", "id": "mobile_width", "label": "Ancho maximo movil", "min": 20, "max": 100, "step": 2, "unit": "%", "default": 100 },

        { "type": "header", "content": "Margenes" },
        { "type": "range", "id": "mt_desktop", "label": "Margen superior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mb_desktop", "label": "Margen inferior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mt_mobile", "label": "Margen superior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mb_mobile", "label": "Margen inferior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 }
      ]
    },
    {
      "type": "rich_text",
      "name": "Texto libre",
      "settings": [
        { "type": "richtext", "id": "content", "label": "Contenido", "default": "<p><a href=\"#\">Consulta bases legales aqui</a>.</p>" },
        {
          "type": "select",
          "id": "font_family",
          "label": "Tipografia",
          "default": "bobby",
          "options": [
            { "value": "bobby", "label": "F37 Bobby Regular" },
            { "value": "ginger", "label": "F37 Ginger Regular" },
            { "value": "ginger_bold", "label": "F37 Ginger Bold" }
          ]
        },
        {
          "type": "select",
          "id": "text_size",
          "label": "Tamano de texto",
          "default": "sm",
          "options": [
            { "value": "sm", "label": "Pequeno" },
            { "value": "base", "label": "Base" },
            { "value": "lg", "label": "Grande" }
          ]
        },
        { "type": "color", "id": "text_color", "label": "Color texto", "default": "#F7F2E6" },
        { "type": "header", "content": "Margenes" },
        { "type": "range", "id": "mt_desktop", "label": "Margen superior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mb_desktop", "label": "Margen inferior desktop", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mt_mobile", "label": "Margen superior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 },
        { "type": "range", "id": "mb_mobile", "label": "Margen inferior movil", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 0 }
      ]
    }
  ],
  "presets": [{ "name": "Sorteo info (verde)", "category": "Migraciones.io" }]
}
{% endschema %}
