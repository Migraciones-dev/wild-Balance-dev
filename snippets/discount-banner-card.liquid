{%- comment -%}
  Snippet: discount-banner-card.liquid
{%- endcomment -%}

<div class="discount-banner-card rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-shadow relative h-full">
  <div class="relative w-full h-full">
    {% if banner_image %}
      {% if action_type == 'link' and link_url != blank %}
        <a href="{{ link_url }}" class="block w-full h-full">
          <img
            src="{{ banner_image | img_url: '1200x' }}"
            alt="{{ banner_image.alt | escape }}"
            class="w-full h-full object-cover rounded-2xl lg:object-center object-center"
            style="object-position: center 40%;"
            loading="lazy"
          >
        </a>
      {% elsif action_type == 'product' and banner_product %}
        <img
          src="{{ banner_image | img_url: '1200x' }}"
          alt="{{ banner_image.alt | escape }}"
          class="w-full h-full object-cover rounded-2xl lg:object-center object-center"
          style="object-position: center 40%;"
          loading="lazy"
        >

        {%- liquid
          assign current_variant = banner_product.selected_or_first_available_variant
          assign isDefault = banner_product.has_only_default_variant
          assign pid = banner_product.id
        -%}

        {% if banner_product.available %}
          {% if isDefault %}
            <button
              class="add-to-cart-btn absolute bottom-4 left-1/2 -translate-x-1/2 px-6 bg-[#FFC107] text-[#004622] font-bold py-2.5 rounded-full transition-colors text-[10px] lg:text-[12px] whitespace-nowrap cursor-pointer"
              style="z-index: 20;"
              data-variant-id="{{ current_variant.id }}"
              data-product-id="{{ pid }}"
              data-product-available="true"
              data-has-variants="false"
            >
              Añadir al carrito
            </button>
          {% else %}
            <button
              class="add-to-cart-btn absolute bottom-4 left-1/2 -translate-x-1/2 px-6 bg-[#FFC107] text-[#004622] font-bold py-2.5 rounded-full transition-colors text-[10px] lg:text-[12px] whitespace-nowrap cursor-pointer"
              style="z-index: 20;"
              data-product-id="{{ pid }}"
              data-product-url="{{ banner_product.url }}"
              data-has-variants="true"
              data-action-quickview
            >
              Añadir al carrito
            </button>
          {% endif %}
        {% else %}
          <button
            class="absolute bottom-4 left-1/2 -translate-x-1/2 px-6 bg-gray-300 text-gray-600 font-bold py-2.5 rounded-full cursor-not-allowed text-[10px] lg:text-[12px] whitespace-nowrap"
            style="z-index: 20;"
            disabled
          >
            Agotado
          </button>
        {% endif %}
      {% else %}
        <img
          src="{{ banner_image | img_url: '1200x' }}"
          alt="{{ banner_image.alt | escape }}"
          class="w-full h-full object-cover rounded-2xl lg:object-center object-center"
          style="object-position: center 40%;"
          loading="lazy"
        >
      {% endif %}
    {% endif %}
  </div>
</div>
