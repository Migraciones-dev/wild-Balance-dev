/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "heading_template": {
      "type": "collection-heading-template",
      "blocks": {
        "07c155bb-29b8-4a2f-a7cf-bf0bd1099c54": {
          "type": "1",
          "settings": {
            "fontf": "2",
            "text_cl": "#004623",
            "text_fs": 40,
            "text_lh": 56,
            "text_fw": 900,
            "text_ls": 0,
            "font_italic": false,
            "font_uppercase": false,
            "text_shadow": false,
            "mgb": 0,
            "text_fs_tb": 35,
            "text_lh_tb": 46,
            "text_ls_tb": 0,
            "mgb_tb": 0,
            "hidden_mobile": false,
            "text_fs_mb": 24,
            "text_lh_mb": 46,
            "text_ls_mb": 0,
            "mgb_mb": 0,
            "text_cl_trans": "#ffffff"
          }
        },
        "3_z3FfBM": {
          "type": "3",
          "settings": {
            "breadcrumb_color": "#cae6c8",
            "breadcrumb_color_link": "#cae6c8",
            "brc_mgb": 5,
            "breadcrumb_cl_trans": "#ffffff",
            "breadcrumb_color_link_trans": "#cccccc"
          }
        }
      },
      "block_order": [
        "07c155bb-29b8-4a2f-a7cf-bf0bd1099c54",
        "3_z3FfBM"
      ],
      "disabled": true,
      "settings": {
        "use_specify_image": false,
        "parallax": false,
        "color": "rgba(0,0,0,0)",
        "overlay": 0,
        "padding_top": 30,
        "padding_bottom": 30,
        "mg_b": 30,
        "padding_top_tb": 30,
        "padding_bottom_tb": 30,
        "mg_btb": 30,
        "padding_top_mb": 30,
        "padding_bottom_mb": 30,
        "mg_bmb": 30,
        "box_border": "top_bottom",
        "bg_pos": "center top",
        "bg_repeat": "no-repeat",
        "bg_size": "cover",
        "show_border": true,
        "cl_bd_trans": "#ffffff",
        "border_cl_trans": 15,
        "color_trans": "#000000",
        "overlay_trans": 0,
        "padding_top_trans": 150,
        "padding_bottom_trans": 50,
        "padding_top_tb_trans": 120,
        "padding_bottom_tb_trans": 50,
        "padding_top_mb_trans": 120,
        "padding_bottom_mb_trans": 40
      }
    },
    "sidebar": {
      "type": "sidebar-collection",
      "blocks": {
        "7ac6f497-c7ca-4dac-8f59-0084f052835e": {
          "type": "filter",
          "settings": {}
        },
        "cd6064d5-464c-431c-b47b-e363158ab8bd": {
          "type": "category",
          "disabled": true,
          "settings": {
            "heading": "Product categories",
            "cat_source": "1",
            "cat_link_list": "",
            "count": false
          }
        }
      },
      "block_order": [
        "7ac6f497-c7ca-4dac-8f59-0084f052835e",
        "cd6064d5-464c-431c-b47b-e363158ab8bd"
      ],
      "settings": {
        "enable_drawer": false,
        "space": 50,
        "size": "medium",
        "br_style": "none",
        "brcolor": "#222222",
        "sidebar_bdr": 5,
        "sidebar_pd": 15
      }
    },
    "main": {
      "type": "main-collection",
      "blocks": {
        "layout_cyC4rp": {
          "type": "layout",
          "disabled": true,
          "settings": {}
        },
        "61521bb9-8203-40bd-bb9d-874f11185c3e": {
          "type": "filter",
          "disabled": true,
          "settings": {
            "style_filters": "area"
          }
        }
      },
      "block_order": [
        "layout_cyC4rp",
        "61521bb9-8203-40bd-bb9d-874f11185c3e"
      ],
      "settings": {
        "show_desc": true,
        "position_desc": "2",
        "product_des": "1",
        "rating_pos": "1",
        "list_color_pos": "1",
        "list_size_pos": "1",
        "show_vendor": false,
        "use_cdt": false,
        "image_ratio": "ratioadapt",
        "image_size": "contain",
        "image_position": "8",
        "content_align": "default",
        "limit": 24,
        "enable_listing": false,
        "enable_listing_default": false,
        "col_dk": "3",
        "col_tb": "2",
        "col_mb": "2",
        "space_h_item": "20",
        "space_v_item": "30",
        "space_h_item_tb": "10",
        "space_v_item_tb": "20",
        "space_h_item_mb": "10",
        "space_v_item_mb": "20",
        "layout_des": "1",
        "use_pagination": "load-more",
        "enable_bar_lm": true,
        "btn_icon": false,
        "btn_rounded": false,
        "button_style": "default",
        "btns_size": "large",
        "btns_cl": "dark",
        "button_effect": "default",
        "btn_pos": "t4s-text-center",
        "type_filters": "facets",
        "layout": "t4s-se-container",
        "cl_bg": "",
        "cl_bg_gradient": "",
        "mg": "50px,50px,0px,50px",
        "pd": "",
        "mg_tb": "20px,20px,0px,20px",
        "pd_tb": "",
        "mg_mb": "10px,10px,0px,10px",
        "pd_mb": ""
      }
    },
    "custom_liquid_78Gin4": {
      "type": "custom-liquid",
      "name": "Custom Liquid",
      "settings": {
        "custom_liquid": "<script>\n(function(){\n  // Evita registrar dos veces\n  if (window.__FILTERS_TRACKER_INIT__) return;\n  window.__FILTERS_TRACKER_INIT__ = true;\n\n  window.dataLayer = window.dataLayer || [];\n\n  // ===== Helpers =====\n  function visible(el){\n    if (!el) return false;\n    var cs = getComputedStyle(el);\n    if (cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0') return false;\n    var r = el.getBoundingClientRect();\n    return r.width > 0 && r.height > 0;\n  }\n\n  function getResultsCount(){\n    // 1) Si hay contador de resultados en el DOM, úsalo\n    var countEl = document.querySelector('[data-products-count], .t4s-toolbar__result, .collection-count, .results-count');\n    if (countEl){\n      var n = parseInt((countEl.textContent || '').replace(/\\D+/g, ''), 10);\n      if (!isNaN(n) && n >= 0) return n;\n    }\n    // 2) Fallback: contar cards visibles\n    var cards = Array.prototype.slice.call(document.querySelectorAll('.t4s-product, [data-product-id]'))\n      .filter(visible);\n    return cards.length || null;\n  }\n\n  function getGroupTitle(input){\n    var grp = input.closest('[data-filter-group], fieldset, .t4s-filter-item, .facets__item, .filter-group');\n    if (!grp) return null;\n    var titleEl = grp.querySelector('[data-filter-title], .t4s-filter__title, legend, h3, h4');\n    return titleEl ? titleEl.textContent.trim() : null;\n  }\n\n  function getOptionLabel(input){\n    // Label asociado\n    var lbl = null;\n    if (input.id) lbl = document.querySelector('label[for=\"'+input.id+'\"]');\n    if (!lbl) lbl = input.closest('label');\n    if (lbl && lbl.textContent) return lbl.textContent.trim();\n\n    // Si es <select>, usa el texto de la opción seleccionada\n    if (input.tagName === 'SELECT'){\n      var opt = input.options[input.selectedIndex];\n      if (opt) return (opt.text || '').trim();\n    }\n\n    // Último recurso: valor\n    return (input.value || '').trim();\n  }\n\n  function parseFilterInfo(input){\n    var filter_type = null;\n    var name = input.name || '';\n    // Shopify storefront filtering (nativo)\n    // p.ej: filter.p.vendor, filter.p.product_type, filter.v.price.gte, filter.v.option.color\n    if (name.indexOf('filter.p.') === 0) {\n      filter_type = name.replace('filter.p.',''); // vendor, product_type, availability...\n    } else if (name.indexOf('filter.v.') === 0) {\n      var rest = name.replace('filter.v.','');\n      if (rest.indexOf('price') === 0) filter_type = 'price';\n      else if (rest.indexOf('option.') === 0) filter_type = 'option_' + rest.replace('option.',''); // option_color, option_size...\n      else filter_type = rest;\n    } else {\n      // Temas antiguos / apps: usa el título del grupo\n      filter_type = getGroupTitle(input) || 'unknown';\n    }\n\n    var filter_applied = getOptionLabel(input);\n    return { filter_type: filter_type, filter_applied: filter_applied };\n  }\n\n  // De-dupe\n  var lastKey = null, lastTs = 0;\n  function makeKey(p){ return [p.filter_type, p.filter_applied].join('|'); }\n  function shouldSend(p){\n    var k = makeKey(p), now = Date.now();\n    if (k === lastKey && (now - lastTs) < 600) return false;\n    lastKey = k; lastTs = now; return true;\n  }\n\n  // Debounce para esperar a que el grid se refresque (AJAX)\n  var debounceTimer = null;\n  function afterGridUpdate(cb){\n    if (debounceTimer) clearTimeout(debounceTimer);\n    debounceTimer = setTimeout(cb, 700);\n  }\n\n  // Observa cambios grandes en el grid para recalcular resultados\n  var mo = new MutationObserver(function(){\n    // No hace push aquí; solo permite que afterGridUpdate haga su trabajo\n  });\n  document.addEventListener('DOMContentLoaded', function(){\n    mo.observe(document.documentElement, { childList: true, subtree: true });\n  });\n\n  // ===== Listener principal: cambios en filtros =====\n  document.addEventListener('change', function(e){\n    var input = e.target;\n\n    // Filtros típicos (checkbox/radio/select) dentro de UI de filtros\n    var isFilter =\n      input.matches('input[type=\"checkbox\"], input[type=\"radio\"], select') &&\n      (input.closest('.t4s-filter, .t4s-sidebar, .facets, .filters, .collection-filters, [data-filters]') || input.name.indexOf('filter.') === 0);\n\n    if (!isFilter) return;\n\n    var info = parseFilterInfo(input);\n    // Si es checkbox y lo desmarcan, igual quieres medir \"remove\". Aquí medimos solo si queda aplicado.\n    if (input.type === 'checkbox' && !input.checked) return;\n\n    // Espera a que el grid termine de actualizar (AJAX) y luego cuenta\n    afterGridUpdate(function(){\n      var payload = {\n        event: 'filtros',\n        filter_applied: info.filter_applied || null,\n        filter_type: info.filter_type || null,\n        total_results: getResultsCount()\n      };\n\n      if (!shouldSend(payload)) return;\n\n      console.log('filtros enviado:', payload);\n      window.dataLayer.push(payload);\n    });\n  }, true);\n})();\n</script>"
      }
    }
  },
  "order": [
    "heading_template",
    "sidebar",
    "main",
    "custom_liquid_78Gin4"
  ]
}
