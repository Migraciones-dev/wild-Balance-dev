/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "heading": {
      "type": "heading-template",
      "blocks": {
        "b49343f1-a16f-4a0c-834a-46b77fe777da": {
          "type": "1",
          "settings": {
            "heading": "",
            "fontf": "2",
            "text_cl": "#004623",
            "text_fs": 50,
            "text_lh": 56,
            "text_fw": 900,
            "text_ls": 0,
            "font_italic": false,
            "font_uppercase": false,
            "text_shadow": false,
            "mgb": 0,
            "text_fs_tb": 30,
            "text_lh_tb": 46,
            "text_ls_tb": 0,
            "mgb_tb": 0,
            "hidden_mobile": false,
            "text_fs_mb": 30,
            "text_lh_mb": 46,
            "text_ls_mb": 0,
            "mgb_mb": 0
          }
        },
        "46ff9c32-9810-4c24-b2bd-9c6e38cc2ea8": {
          "type": "3",
          "disabled": true,
          "settings": {
            "breadcrumb_color": "#868686",
            "breadcrumb_color_link": "#000000",
            "brc_mgb": 0
          }
        }
      },
      "block_order": [
        "b49343f1-a16f-4a0c-834a-46b77fe777da",
        "46ff9c32-9810-4c24-b2bd-9c6e38cc2ea8"
      ],
      "disabled": true,
      "settings": {
        "parallax": false,
        "color": "#000000",
        "overlay": 0,
        "padding_top": 50,
        "padding_bottom": 50,
        "mg_b": 50,
        "padding_top_tb": 50,
        "padding_bottom_tb": 50,
        "mg_btb": 50,
        "padding_top_mb": 50,
        "padding_bottom_mb": 0,
        "mg_bmb": 27,
        "box_border": "none",
        "bg_pos": "center center",
        "bg_repeat": "no-repeat",
        "bg_size": "cover"
      }
    },
    "2fa35883-7762-4b11-9a64-3e08390ea41e": {
      "type": "custom-liquid",
      "settings": {
        "custom_liquid": "<div class=\"headerWizard\">\n<section class=\"logo\">\n<a href=\"https://wildbalance.es/\">\n<img src=\"https://cdn.shopify.com/s/files/1/0713/9898/1933/files/LOGO_1_1.png?v=1699453886\"/>\n</a>\n</section>\n\n<section class=\"wizardBubbleDiscount\">\n<div>\n<p>10% DESCUENTO</p>\n</div>\n</section>\n</div>"
      }
    },
    "custom_liquid_ibzxRE": {
      "type": "custom-liquid",
      "disabled": true,
      "settings": {
        "custom_liquid": "{% render 'wizard-resultpage-js' %}"
      }
    },
    "custom_liquid_BqAicP": {
      "type": "custom-liquid",
      "name": "Custom Liquid",
      "settings": {
        "custom_liquid": "<script>\n  // Reemplaza TODO tu bloque por este\n  window.prqQuizCallback = function(quizResponse){\n    console.log(\"[prqQuizCallback] start\", quizResponse);\n\n    // Guardamos ambos por compatibilidad\n    try {\n      localStorage.setItem('response', JSON.stringify(quizResponse));\n      localStorage.setItem('prq_last_response', JSON.stringify(quizResponse));\n    } catch(e){}\n\n    // --- Normalización al formato \"legacy\" que tu server probablemente espera ---\n    var resp  = quizResponse || {};\n    var attrs = (resp.response && resp.response.attributes) || {};\n\n    var legacyPayload = {\n      shopDomain: location.host,\n      quizId:     resp.quizid || resp.quizId || (resp.quiz && resp.quiz.id) || null,\n      responseId: resp.responseId || (resp.response && resp.response.id) || null,\n\n      selected_result_id: attrs.selected_result_id || (attrs.selected_result && attrs.selected_result.data && attrs.selected_result.data.id) || null,\n      tags: Array.isArray(attrs.tags) ? attrs.tags : [],\n\n      recommended_products: (Array.isArray(attrs.recommended_products) ? attrs.recommended_products : []).map(function(p){\n        return {\n          product_id: p.product_id || p.id || p.productId || null,\n          variant_id: p.variant_id || p.variantId || null,\n          title:      p.title || p.name || p.product_title || '',\n          handle:     p.handle || '',\n          url:        p.url || p.product_url || ''\n        };\n      }),\n\n      result: {\n        pet_name: attrs.pet_name || attrs.petName || '',\n        pet: attrs.pet || '',\n        grams: attrs.grams || null,\n        burgers: attrs.burgers || null,\n        food_type: attrs.food_type || attrs.foodType || '',\n        is_new_with_barf: !!attrs.is_new_with_barf,\n        half_menu: !!attrs.half_menu,\n\n        small_freezer_frequency:  attrs.small_freezer_frequency  || null,\n        medium_freezer_frequency: attrs.medium_freezer_frequency || null,\n        big_freezer_frequency:    attrs.big_freezer_frequency    || null,\n\n        small_freezer_link:  attrs.small_freezer_link  || '',\n        medium_freezer_link: attrs.medium_freezer_link || '',\n        big_freezer_link:    attrs.big_freezer_link    || '',\n\n        small_freezer_plan_id:  attrs.small_freezer_plan_id  || null,\n        medium_freezer_plan_id: attrs.medium_freezer_plan_id || null,\n        big_freezer_plan_id:    attrs.big_freezer_plan_id    || null,\n\n        // Variantes recomendadas (si tu template las itera)\n        product_recommendation_variants: {\n          value: (attrs.product_recommendation_variants && Array.isArray(attrs.product_recommendation_variants.value)\n                  ? attrs.product_recommendation_variants.value\n                  : []).map(function(v){\n            return {\n              id: v.id || v.variant_id || null,\n              price: v.price || null,\n              product: {\n                title: (v.product && v.product.title) || v.title || '',\n                featured_image: (v.product && v.product.featured_image) || v.image || null,\n                metafields: { custom: { short_description_result_page: (v.product && v.product.metafields && v.product.metafields.custom && v.product.metafields.custom.short_description_result_page) || '' } }\n              }\n            };\n          })\n        }\n      },\n\n      original: resp // por si el server lo usa\n    };\n\n    // ID correcto de respuesta (para redirigir)\n    var rid  = legacyPayload.responseId || null;\n    var base = \"/pages/wizard-result\"; // RUTA RELATIVA (mismo host)\n    var url  = rid ? (base + \"?rid=\" + encodeURIComponent(rid)) : base;\n\n    // --- POST al server con el payload normalizado (si falla, igual redirigimos) ---\n    var endpoint = \"https://wildbalance-app-rocket.fly.dev/insert-data\";\n\n    if (window.jQuery && jQuery.ajax) {\n      jQuery.ajax({\n        url: endpoint,\n        type: \"POST\",\n        dataType: \"json\",\n        contentType: \"application/json; charset=UTF-8\",\n        data: JSON.stringify(legacyPayload),\n        timeout: 4000\n      }).always(function(){  // success o error → redirigimos igual\n        console.log(\"[prqQuizCallback] redirect ->\", location.host + url);\n        window.location.replace(url);\n      });\n    } else {\n      // Sin jQuery → fetch\n      fetch(endpoint, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json;charset=UTF-8\" },\n        body: JSON.stringify(legacyPayload),\n        keepalive: true\n      }).catch(function(){})\n        .finally(function(){\n          console.log(\"[prqQuizCallback] redirect ->\", location.host + url);\n          window.location.replace(url);\n        });\n    }\n  };\n</script>"
      }
    },
    "17007363095c6db749": {
      "type": "apps",
      "blocks": {
        "0ffae087-4c23-4da3-ad42-99aef600abfa": {
          "type": "shopify://apps/revenuehunt-quizzes/blocks/inline-quiz/672f3d48-fd3b-4227-8778-c6e58c4f8a98",
          "settings": {
            "quiz_id": "7jHvyKp",
            "quiz_height": 735,
            "quiz_autoscroll": false,
            "quiz_fixed_height": true
          }
        }
      },
      "block_order": [
        "0ffae087-4c23-4da3-ad42-99aef600abfa"
      ],
      "settings": {}
    },
    "main": {
      "type": "main-page",
      "settings": {
        "layout": "t4s-container-wrap",
        "cl_bg": "",
        "cl_bg_gradient": "",
        "mg": "60px,100px,60px,100px",
        "pd": "",
        "mg_tb": "20px,10px,30px,10px",
        "pd_tb": "",
        "mg_mb": "10px,10px,30px,10px",
        "pd_mb": ""
      }
    },
    "custom_liquid_HBy9ba": {
      "type": "custom-liquid",
      "settings": {
        "custom_liquid": "<style>\ndiv.rh-fullwidth .rh-widget.rh-inline.rh-quiz-GrHkMm{\n  height: 100vh !important;\n}\n</style>"
      }
    }
  },
  "order": [
    "heading",
    "2fa35883-7762-4b11-9a64-3e08390ea41e",
    "custom_liquid_ibzxRE",
    "custom_liquid_BqAicP",
    "17007363095c6db749",
    "main",
    "custom_liquid_HBy9ba"
  ]
}
